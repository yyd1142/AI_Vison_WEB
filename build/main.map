{"version":3,"sources":["webpack:///webpack/bootstrap 3bb79962ef99e15a927c","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///./server/config/index.js","webpack:///external \"axios\"","webpack:///./nuxt.config.js","webpack:///./server/router/index.js","webpack:///external \"kcors\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-compose\"","webpack:///external \"koa-onerror\"","webpack:///external \"nuxt\"","webpack:///external \"winston\"","webpack:///./server/config/development.js","webpack:///./server/config/production.js","webpack:///./server/database/RegionsDBAction.js","webpack:///./server/database/StoresDBAction.js","webpack:///external \"koa-router\"","webpack:///external \"path\"","webpack:///external \"regenerator-runtime\"","webpack:///./server/index.js"],"names":["development","require","production","NODE_ENV","module","exports","path","resolve","router","middleware","head","title","meta","charset","name","content","hid","link","rel","type","href","script","async","defer","src","css","loading","color","build","extend","config","ctx","alias","join","__dirname","isClient","plugins","ssr","KoaRouter","RegionsDBAction","StoresDBAction","regionsDBAction","storesDBAction","apiRouter","prefix","get","next","getAllRegions","response","body","code","datas","id","query","range","groupby","getPeoPleCountById","response_","counts","peopleCounts","length","data","getAllPeoPleCount","getAllStore","sid","getPeoPleCountByStoreInRegion","getAllPeoPleCountInRegion","routes","port","host","db","database","user","password","multipleStatements","redis","RDS_PORT","RDS_HOST","RDS_PWD","imgDomin","domain","axios","then","catch","console","log","error","params","storeid","app","Koa","process","env","HOST","PORT","dev","nuxt","Nuxt","builder","Builder","use","cors","KoaBodyparser","KoaOnerror","KoaCompose","myRouters","start","Date","request","method","LOGGER","info","JSON","stringify","ms","url","status","Promise","reject","res","on","render","req","promise","undefined","err","listen","global","CONFIG","winston","transports","push","File","filename","level","Console","Logger","DEBUG","handleExceptions","stack"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3bb79962ef99e15a927c","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","const development = require('./development');\r\nconst production = require('./production');\r\n\r\nconst NODE_ENV = process.env.NODE_ENV || 'development';\r\nmodule.exports = NODE_ENV === 'development' ? development : production;\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 2\n// module chunks = 0","const path = require('path');\r\nconst resolve = path.resolve;\r\nmodule.exports = {\r\n  /*\r\n  ** Headers of the page\r\n  */\r\n  router: {\r\n    middleware: 'auth'\r\n  },\r\n  head: {\r\n    title: 'AIVision',\r\n    meta: [\r\n      { charset: 'utf-8' },\r\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\r\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\r\n    ],\r\n    link: [\r\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\r\n    ],\r\n    script: [\r\n      {\r\n        async: 'async',\r\n        defer: 'defer',\r\n        type: 'text/javascript',\r\n        src: '/libs/echarts.min.js'\r\n      }\r\n    ],\r\n  },\r\n  /*\r\n  ** Global CSS\r\n  */\r\n  css: [\r\n    '@assets/css/main.css',\r\n    '@assets/icons/iconfont.css',\r\n    'element-ui/lib/theme-chalk/index.css',\r\n    'video.js/dist/video-js.css'\r\n  ],\r\n  /*\r\n  ** Customize the progress-bar color\r\n  */\r\n  loading: { color: '#3B8070' },\r\n  /*\r\n   ** Build configuration\r\n   */\r\n  build: {\r\n    /*\r\n     ** Run ESLINT on save\r\n     */\r\n    extend(config, ctx) {\r\n      config.resolve.alias['@components'] = path.join(__dirname, 'components')\r\n      config.resolve.alias['@plugins'] = path.join(__dirname, 'plugins')\r\n      config.resolve.alias['@assets'] = path.join(__dirname, 'assets')\r\n      config.resolve.alias['@static'] = path.join(__dirname, 'static')\r\n      config.resolve.alias['@store'] = path.join(__dirname, 'store')\r\n      config.resolve.alias['@pages'] = path.join(__dirname, 'pages')\r\n      config.resolve.alias['@js'] = path.join(__dirname, 'js')\r\n      config.resolve.alias['@style'] = path.join(__dirname, 'style')\r\n      config.resolve.alias['@filters'] = path.join(__dirname, 'filters')\r\n      if (ctx.isClient) {\r\n        // config.module.rules.push({\r\n        //   enforce: 'pre',\r\n        //   test: /\\.(js|vue)$/,\r\n        //   loader: 'eslint-loader',\r\n        //   exclude: /(node_modules)/\r\n        // })\r\n      }\r\n    }\r\n  },\r\n  plugins: [\r\n    '@plugins/element-ui',\r\n    '~/utils/auth',\r\n    '~theme/index.css',\r\n    { src: '@plugins/nuxt-video-player-plugin.js', ssr: false }\r\n  ]\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","const KoaRouter = require('koa-router');\r\nconst RegionsDBAction = require('../database/RegionsDBAction');\r\nconst StoresDBAction = require('../database/StoresDBAction');\r\n\r\nconst regionsDBAction = new RegionsDBAction();\r\nconst storesDBAction = new StoresDBAction();\r\nconst apiRouter = KoaRouter({\r\n  prefix: '/api'\r\n})\r\n\r\napiRouter.get('/regionsAll', async (ctx, next) => {\r\n  const response = await regionsDBAction.getAllRegions();\r\n  ctx.body = { code: 0, datas: response };\r\n});\r\n\r\napiRouter.get('/regions/people-counts', async (ctx, next) => {\r\n  const id = ctx.query.id;\r\n  const range = ctx.query.range;\r\n  const groupby = ctx.query.groupby;\r\n  const response = await regionsDBAction.getPeoPleCountById(id, range, groupby);\r\n  let response_ = {\r\n    ...response,\r\n    counts: (response.peopleCounts && response.peopleCounts.length > 0) ? response.peopleCounts.length : 0\r\n  }\r\n  ctx.body = { code: 0, data: response_ };\r\n});\r\n\r\napiRouter.get('/regions/people-counts/all', async (ctx, next) => {\r\n  const range = ctx.query.range;\r\n  const groupby = ctx.query.groupby;\r\n  const response = await regionsDBAction.getAllPeoPleCount(range, groupby);\r\n  if (response.length <= 0) {\r\n    ctx.body = { code: 0, datas: [] };\r\n  } else {\r\n    ctx.body = { code: 0, datas: response };\r\n  }\r\n});\r\n\r\napiRouter.get('/storesAll', async (ctx, next) => {\r\n  const id = ctx.query.id;\r\n  const response = await storesDBAction.getAllStore(id);\r\n  if (response.length <= 0) {\r\n    ctx.body = { code: 0, datas: [] };\r\n  } else {\r\n    ctx.body = { code: 0, datas: response };\r\n  }\r\n});\r\n\r\napiRouter.get('/stores/people-counts', async (ctx, next) => {\r\n  const id = ctx.query.id;\r\n  const sid = ctx.query.sid;\r\n  const range = ctx.query.range;\r\n  const groupby = ctx.query.groupby;\r\n  const response = await storesDBAction.getPeoPleCountByStoreInRegion(id, sid, range, groupby);\r\n  let response_ = {\r\n    ...response,\r\n    counts: (response.peopleCounts && response.peopleCounts.length > 0) ? response.peopleCounts.length : 0\r\n  }\r\n  ctx.body = { code: 0, data: response_ };\r\n});\r\n\r\napiRouter.get('/stores/people-counts/all', async (ctx, next) => {\r\n  const id = ctx.query.id;\r\n  const range = ctx.query.range;\r\n  const groupby = ctx.query.groupby;\r\n  const response = await storesDBAction.getAllPeoPleCountInRegion(id, range, groupby);\r\n  if (response.length <= 0) {\r\n    ctx.body = { code: 0, datas: [] };\r\n  } else {\r\n    ctx.body = { code: 0, datas: response };\r\n  }\r\n});\r\n\r\nmodule.exports = [apiRouter.routes()];\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/router/index.js","module.exports = require(\"kcors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"kcors\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"koa-compose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-compose\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"koa-onerror\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-onerror\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"winston\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"winston\"\n// module id = 11\n// module chunks = 0","module.exports = {\r\n  port: 3000,\r\n  host: '0.0.0.0',\r\n  db: {\r\n    host: 'tdsql-75jy4jvx.sql.tencentcdb.com',\r\n    database: 'face_painting',\r\n    user: 'fp',\r\n    port: 65,\r\n    password: 'MKO--Team--2018',\r\n    multipleStatements: true\r\n  },\r\n  redis: {\r\n    RDS_PORT: 6379,\r\n    RDS_HOST: '193.112.185.85',\r\n    RDS_PWD: 'MKO--Team--2018'\r\n  },\r\n  imgDomin: 'https://fp-1256261446.picgz.myqcloud.com',\r\n  domain: 'http://jericsaez.ddns.net/api/v1'\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/development.js","module.exports = {\r\n  port: 3000,\r\n  host: '0.0.0.0',\r\n  db: {\r\n    host: '10.8.0.14',\r\n    database: 'face_painting',\r\n    user: 'fp',\r\n    port: 3306,\r\n    password: 'MKO--Team--2018',\r\n    multipleStatements: true\r\n  },\r\n  redis: {\r\n    RDS_PORT: 6379,\r\n    RDS_HOST: '10.8.0.6',\r\n    RDS_PWD: 'MKO--Team--2018'\r\n  },\r\n  imgDomin: 'https://fp-1256261446.picgz.myqcloud.com',\r\n  domain: 'http://jericsaez.ddns.net/api/v1'\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/production.js","const axios = require('axios');\r\nconst config = require('../config');\r\nconst domain = config.domain;\r\n\r\nclass RegionsDBAction {\r\n    constructor() {\r\n    }\r\n\r\n    async getAllRegions() {\r\n        return await axios.get(`${domain}/Regions`).then(response => {\r\n            if (response.data) {\r\n                return response.data;\r\n            } else {\r\n                return {};\r\n            }\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    async getPeoPleCountById(id, range, groupby) {\r\n        let params = `${domain}/Regions/${id}/people-counts`;\r\n        if (range && groupby) {\r\n            params = `${params}?range=${range}&groupby=${groupby}`\r\n        }\r\n        return await axios.get(params).then(response => {\r\n            if (response.data) {\r\n                return response.data;\r\n            } else {\r\n                return {};\r\n            }\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    async getAllPeoPleCount(range, groupby) {\r\n        let params = `${domain}/Regions/people-counts`;\r\n        if (range && groupby) {\r\n            params = `${params}?range=${range}&groupby=${groupby}`\r\n        }\r\n        return await axios.get(params).then(response => {\r\n            if (response.data) {\r\n                return response.data;\r\n            } else {\r\n                return {};\r\n            }\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = RegionsDBAction;\n\n\n// WEBPACK FOOTER //\n// ./server/database/RegionsDBAction.js","const axios = require('axios');\r\nconst config = require('../config');\r\nconst domain = config.domain;\r\nclass StoresDBAction {\r\n    constructor() {\r\n    }\r\n\r\n    async getAllStore(id) {\r\n        return await axios.get(`${domain}/Regions/${id}/stores`).then(response => {\r\n            if (response.data) {\r\n                return response.data;\r\n            } else {\r\n                return {};\r\n            }\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    async getPeoPleCountByStoreInRegion(id, sid, range, groupby) {\r\n        let params = `${domain}/Regions/${id}/stores/${storeid}/people-counts`;\r\n        if (range && groupby) {\r\n            params = `${params}?range=${range}&groupby=${groupby}`\r\n        }\r\n        return await axios.get(params).then(response => {\r\n            if (response.data) {\r\n                return response.data;\r\n            } else {\r\n                return {};\r\n            }\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    async getAllPeoPleCountInRegion(id, range, groupby) {\r\n        let params = `${domain}/Regions/${id}/stores/people-counts`;\r\n        if (range && groupby) {\r\n            params = `${params}?range=${range}&groupby=${groupby}`\r\n        }\r\n        return await axios.get(params).then(response => {\r\n            if (response.data) {\r\n                return response.data;\r\n            } else {\r\n                return {};\r\n            }\r\n        }).catch(error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = StoresDBAction;\n\n\n// WEBPACK FOOTER //\n// ./server/database/StoresDBAction.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 18\n// module chunks = 0","global.CONFIG = require('./config');\r\nconst winston = require('winston');\r\nvar transports = [];\r\ntransports.push(new (winston.transports.File)({\r\n  filename: 'output.log',\r\n  level: 'info'\r\n}));\r\n// 目前暂时将日志输出至Console，后期生产环境中建议移除\r\ntransports.push(new (winston.transports.Console)({\r\n  level: 'info'\r\n}));\r\nglobal.LOGGER = new (winston.Logger)({\r\n  transports: transports\r\n});\r\nglobal.DEBUG = !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\r\n\r\nif (!DEBUG) {\r\n  winston.handleExceptions(new winston.transports.File({ filename: 'error.log' }))\r\n}\r\n\r\nconst Koa = require('koa')\r\nconst cors = require('kcors')\r\nconst KoaBodyparser = require('koa-bodyparser')\r\nconst KoaOnerror = require('koa-onerror')\r\nconst { Nuxt, Builder } = require('nuxt')\r\nconst myRouters = require('./router')\r\nconst KoaCompose = require('koa-compose')\r\n\r\nasync function start () {\r\n  const app = new Koa()\r\n  const host = process.env.HOST || '127.0.0.1'\r\n  const port = process.env.PORT || 3000\r\n\r\n  // Import and Set Nuxt.js options\r\n  const config = require('../nuxt.config.js')\r\n  config.dev = !(app.env === 'production')\r\n\r\n  // Instantiate nuxt.js\r\n  const nuxt = new Nuxt(config)\r\n\r\n  // Build in development\r\n  if (config.dev) {\r\n    const builder = new Builder(nuxt)\r\n    await builder.build()\r\n  }\r\n  app.use(cors());\r\n  app.use(KoaBodyparser());\r\n  KoaOnerror(app);\r\n  app.use(KoaCompose(myRouters));\r\n  app.use(async (ctx, next) => {\r\n    await next();\r\n    var start = new Date();\r\n    if (ctx.request.method == 'POST') {\r\n      LOGGER.info(`POST Body: ${JSON.stringify(ctx.request.body)} Time: ${start}`);\r\n    }\r\n    var ms = new Date() - start;\r\n    LOGGER.info(`${ctx.request.method} ${ctx.request.url} ${ms}ms Time: ${start}`);\r\n  })\r\n  app.use(async (ctx, next) => {\r\n    await next()\r\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\r\n    return new Promise((resolve, reject) => {\r\n      ctx.res.on('close', resolve)\r\n      ctx.res.on('finish', resolve)\r\n      nuxt.render(ctx.req, ctx.res, promise => {\r\n        if (promise === undefined)\r\n          return;\r\n        if ('then' in promise){\r\n          promise.then(resolve).catch(reject)\r\n        }\r\n      })\r\n    })\r\n  })\r\n  app.on('error', function(err){\r\n    LOGGER.error(err);\r\n  })\r\n  app.listen(port, host)\r\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\r\n}\r\n\r\nprocess.on('uncaughtException', function(err) {\r\n  if (err.code != \"ECONNRESET\"){\r\n    console.log(err.stack);\r\n  }\r\n});\r\n\r\nstart()\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}